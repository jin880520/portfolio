<!doctype html>
<html lang="ko">
<head>
    <meta charset="utf-8" />
    <title>상품 상세</title>
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <link rel="stylesheet" href="css/navbar.css?v=val_251015_001">
    <link rel="stylesheet" href="test/test.css?v=val_251015_001">
    <link rel="stylesheet" href="css/member_store.css?v=val_251015_001">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css"/>
    <style>
        .card{border:none;box-shadow:none}
        .detail{display:grid;grid-template-columns:1.1fr .9fr;gap:16px;align-items:start}
        @media (max-width:960px){.detail{grid-template-columns:1fr}}
        .gallery{display:grid;grid-template-columns:1fr;gap:10px}
        .gallery-main{position:relative;aspect-ratio:1/1;background:#fafafa;border:1px solid var(--cb-line);border-radius:14px;overflow:hidden}
        .gallery-main img{width:100%;height:100%;object-fit:cover}
        .thumbs{display:grid;grid-template-columns:repeat(5,1fr);gap:8px}
        @media (max-width:540px){.thumbs{grid-template-columns:repeat(4,1fr)}}
        .thumb{border:0;border-radius:10px;overflow:hidden;cursor:pointer;background:#fff;aspect-ratio:1/1;position:relative;padding:0}
        .thumb.active{outline:2px solid var(--accent)}
        .thumb img{width:100%;height:100%;object-fit:cover}
        .p-name{font-size:22px;font-weight:900;margin:4px 0 6px;line-height:1.35}
        .p-meta{color:#6c7a89;font-size:13px;margin-bottom:10px}
        .price-row{display:flex;align-items:baseline;gap:10px;margin:10px 0 14px}
        .price-sale{color:#b02a37;font-weight:900;font-size:22px}
        .price-origin{color:#9aa6b2;text-decoration:line-through;font-size:14px}
        .badge.new{background:#e9f7ef;color:#1e7e34}
        .badge.sale{background:#ffecec;color:#b02a37}
        .badge.soldout{background:#fff6d8;color:#8a6d00}
        .opts{display:grid;gap:10px;margin:12px 0}
        .row{display:grid;grid-template-columns:110px 1fr;gap:10px;align-items:center}
        @media (max-width:560px){.row{grid-template-columns:1fr}.row label{font-weight:700}}
        .qty{display:flex;align-items:center;gap:8px}
        .qty input{width:110px;text-align:center}
        .qty .btn{padding:8px 12px}
        .actions{display:flex;gap:8px;flex-wrap:wrap}
        .actions .btn{min-width:120px}
        .shipinfo{margin-top:10px}
        .tabs{margin-top:18px}
        .tab-head{display:flex;gap:8px;flex-wrap:wrap}
        .tab-btn{border:1px solid var(--cb-line);background:#fff;border-radius:999px;padding:8px 14px;cursor:pointer;font-weight:800}
        .tab-btn.active{background:#2b63f1;color:#fff;border-color:#2b63f1}
        .tab-panel{display:none;margin-top:12px}
        .tab-panel.active{display:block}
        .desc-box{border:1px dashed var(--cb-line);border-radius:14px;padding:14px;line-height:1.7;color:#2a3952}
        .review-item{border-bottom:1px solid var(--cb-line);padding:12px 4px}
        .review-item:last-child{border-bottom:none}
        .rel-wrap{margin-top:28px}
        .grid-head{display:flex;align-items:center;justify-content:space-between;margin:6px 2px 10px;flex-wrap:wrap;gap:8px}
        .prod-grid{display:grid;gap:12px;grid-template-columns:repeat(4,1fr)}
        @media (max-width:960px){.prod-grid{grid-template-columns:repeat(3,1fr)}}
        @media (max-width:720px){.prod-grid{grid-template-columns:repeat(2,1fr)}}
        @media (max-width:420px){.prod-grid{grid-template-columns:1fr}}
        .product{background:#fff;border:1px solid var(--cb-line);border-radius:14px;overflow:hidden;box-shadow:var(--cb-shadow);display:flex;flex-direction:column}
        .thumb-wrap{position:relative;aspect-ratio:1/1;background:#fafafa;overflow:hidden}
        .thumb-wrap img{width:100%;height:100%;object-fit:cover}
        .badges{position:absolute;top:8px;left:8px;display:flex;gap:6px;flex-wrap:wrap}
        .p-body{padding:12px;display:flex;flex-direction:column;gap:8px;flex:1}
        .p-title{font-weight:800;font-size:15px;line-height:1.35;min-height:2.6em;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden}
        .p-cat{color:var(--cb-sub);font-size:12px}
        .p-price{display:flex;align-items:baseline;gap:8px}
        .p-price .sale{color:#b02a37;font-weight:800}
        .p-price .origin{color:#9aa6b2;text-decoration:line-through;font-size:13px}
        .p-actions{display:flex;gap:8px;margin-top:auto}
        .buybar{display:none}
        @media (max-width:900px){.buybar{position:fixed;left:0;right:0;bottom:0;background:#fff;border-top:1px solid var(--cb-line);box-shadow:0 -6px 16px rgba(51,65,85,.06);display:flex;gap:10px;padding:10px 12px;align-items:center;z-index:50}.buybar .price{font-weight:900;font-size:16px;margin-right:auto}body{padding-bottom:76px}}
    </style>
</head>
<body>
<aside class="cb-sidemenu"><!--개발시 해당 메뉴는 기존 메뉴를 사용하세요 {% include 'admin/navbar.html' %} -->
    <div class="cb-sidemenu-inner cb-menu-style">
        <div class="cb-menu-admin-logo" style="text-align:center;margin-bottom:12px;"><img src="test/testai.png" alt="사이트 로고" style="max-width:150px;object-fit:contain;"></div>
        <div class="cb-menu-admin-name">테스트 유저님<br></div>
        <a><span class="cb-menu-icon"><i class="fa-solid fa-arrow-right-from-bracket"></i></span>로그아웃</a>
        <div class="cb-menu-toggle-all" style="display:flex;gap:15px;justify-content:flex-end;padding:12px;">
            <a type="button" onclick="expandAllMenus()" class="toggle_all" id="expandAllBtn_p">＋</a>
            <a type="button" onclick="collapseAllMenus()" class="toggle_all" id="collapseAllBtn_p">－</a>
        </div>
        <div class="cb-menu-group" data-key="menu_general">
            <div class="cb-menu-group-title" onclick="toggleMenuGroup(this)">스토어</div>
            <div class="cb-menu-group-body">
                <a href="02_01.html" class="cb-sidemenu-link"><span class="cb-menu-icon"><i class="fa-solid fa-cart-shopping"></i></span>쇼핑</a>
                <a href="02_02.html" class="cb-sidemenu-link"><span class="cb-menu-icon"><i class="fa-solid fa-basket-shopping"></i></span>장바구니</a>
                <a href="02_03.html" class="cb-sidemenu-link"><span class="cb-menu-icon"><i class="fa-solid fa-file-invoice-dollar"></i></span>주문/결제 내역</a>
                <a href="02_04.html" class="cb-sidemenu-link"><span class="cb-menu-icon"><i class="fa-solid fa-ticket"></i></span>쿠폰</a>
            </div>
        </div>
        <a>&nbsp;</a>
    </div>
</aside>
<div class="wrap">
    <div class="title">상품 상세</div>
    <div class="sub">가격은 부가세 포함이며, 일부 지역은 추가 배송비가 발생할 수 있습니다.</div>
    <div class="detail">
        <div class="card gallery" id="gallery">
            <div class="gallery-main"><img id="mainImg" src="https://picsum.photos/seed/p100/1000/1000" alt="상품 메인 이미지"></div>
            <div class="thumbs" id="thumbs"></div>
        </div>
        <div class="card">
            <div class="badge new">NEW</div>
            <h1 class="p-name" id="pName">무선 이어폰 X1</h1>
            <div class="p-meta">카테고리: <span id="pCat">전자</span> · 상품번호 <span id="pSku">WX1-BLK</span></div>
            <div class="price-row">
                <div class="price-sale" id="pPrice">129,000원</div>
                <div class="price-origin" id="pOrigin">159,000원</div>
                <div class="badge sale" id="pRate">-19%</div>
            </div>
            <div class="opts">
                <div class="row">
                    <label for="optColor">색상</label>
                    <select id="optColor" class="box">
                        <option value="black" selected>블랙</option>
                        <option value="white">화이트</option>
                        <option value="navy">네이비</option>
                    </select>
                </div>
                <div class="row">
                    <label for="optSize">구성</label>
                    <select id="optSize" class="box">
                        <option value="basic" selected>기본 패키지</option>
                        <option value="plus">플러스(실리콘팁 추가)</option>
                    </select>
                </div>
                <div class="row">
                    <label>수량</label>
                    <div class="qty">
                        <button class="btn small" type="button" id="minus">−</button>
                        <input class="box" id="qty" type="number" min="1" value="1" />
                        <button class="btn small" type="button" id="plus">＋</button>
                    </div>
                </div>
                <div class="row">
                    <label>재고</label>
                    <div id="stock">128개</div>
                </div>
            </div>
            <div class="actions">
                <button class="btn" id="btnCart"><i class="fa-solid fa-basket-shopping"></i> 장바구니</button>
                <button class="btn primary" id="btnBuy"><i class="fa-solid fa-bolt"></i> 바로구매</button>
            </div>
            <div class="shipinfo hint">기본 배송 3,000원 (500,000원 이상 무료). 도서/산간 지역은 추가 배송비가 부과될 수 있습니다.</div>
        </div>
    </div>
    <div class="tabs">
        <div class="tab-head">
            <button class="tab-btn active" data-tab="desc">상세정보</button>
            <button class="tab-btn" data-tab="review">리뷰(12)</button>
            <button class="tab-btn" data-tab="qa">Q&A(3)</button>
        </div>
        <div class="tab-panel active" id="tab-desc">
            <div class="card desc-box">
                <h3>제품 설명</h3>
                <p>액티브 노이즈 캔슬링 지원, 최대 24시간 재생, IPX4 생활 방수. 저지연 모드로 동영상/게임에 최적화되어 있습니다.</p>
                <ul>
                    <li>블루투스 5.3, 멀티포인트 연결</li>
                    <li>USB-C 고속 충전 (10분 충전, 최대 2시간 재생)</li>
                    <li>1년 무상보증</li>
                </ul>
                <p class="hint">※ 실제 색상은 모니터 환경에 따라 다를 수 있습니다.</p>
            </div>
        </div>
        <div class="tab-panel" id="tab-review">
            <div class="card">
                <div class="review-item"><b>김**</b> <span class="hint">2025-09-23</span><br/>소리 균형 좋고 통화품질도 만족합니다.</div>
                <div class="review-item"><b>박**</b> <span class="hint">2025-09-20</span><br/>착용감 가볍고 배터리 오래가요. 재구매 의사 있습니다.</div>
                <div class="hint" style="margin-top:8px;">※ 리뷰는 검수 후 노출됩니다.</div>
            </div>
        </div>
        <div class="tab-panel" id="tab-qa">
            <div class="card">
                <div class="review-item"><b>Q.</b> A/S는 어디서 받나요?<br/><b>A.</b> 주문 내역에서 접수하거나 고객센터로 문의해주세요.</div>
                <div class="review-item"><b>Q.</b> iOS/안드로이드 모두 사용 가능한가요?<br/><b>A.</b> 네, 블루투스 표준을 지원하는 기기면 사용 가능합니다.</div>
            </div>
        </div>
    </div>
    <div class="rel-wrap">
        <div class="grid-head">
            <h3 style="margin:0;">관련 상품</h3>
            <a href="02_01.html" class="hint">전체 보기</a>
        </div>
        <div class="prod-grid" id="relGrid"></div>
    </div>
</div>
<div class="buybar" id="buybar">
    <div class="price" id="barPrice">129,000원</div>
    <button class="btn" id="barCart"><i class="fa-solid fa-basket-shopping"></i></button>
    <button class="btn primary" id="barBuy"><i class="fa-solid fa-bolt"></i> 구매</button>
</div>
<script>
    const product = {
        id: 1,
        title: "무선 이어폰 X1",
        catName: "전자",
        sku: "WX1-BLK",
        price: 159000,
        sale: 129000,
        stock: 128,
        images: [
            "https://picsum.photos/seed/p100/1000/1000",
            "https://picsum.photos/seed/p101/1000/1000",
            "https://picsum.photos/seed/p102/1000/1000",
            "https://picsum.photos/seed/p103/1000/1000",
            "https://picsum.photos/seed/p104/1000/1000"
        ]
    };
    const related = Array.from({ length: 8 }).map((_, i) => ({
        id: i + 1,
        title: `액세서리 ${i + 1}`,
        cat: "전자",
        price: 39000 + i * 1000,
        sale: i % 2 === 0 ? 29000 + i * 1000 : 0,
        img: "https://picsum.photos/seed/r" + (200 + i) + "/600/600",
        slug: "rel-" + (i + 1),
        soldout: i % 5 === 0
    }));
    const qs = (s, el = document) => el.querySelector(s);
    const qsa = (s, el = document) => Array.from(el.querySelectorAll(s));
    const fmtKRW = n => (n ?? 0).toLocaleString("ko-KR") + "원";
    function discountRate(p, s) { return p && s && s < p ? Math.round((1 - s / p) * 100) : 0; }
    function bindDetail() {
        qs("#pName").textContent = product.title;
        qs("#pCat").textContent = product.catName;
        qs("#pSku").textContent = product.sku;
        qs("#pPrice").textContent = fmtKRW(product.sale || product.price);
        qs("#barPrice").textContent = fmtKRW(product.sale || product.price);
        if (product.sale && product.sale < product.price) {
            qs("#pOrigin").textContent = fmtKRW(product.price);
            qs("#pRate").textContent = `-${discountRate(product.price, product.sale)}%`;
        } else {
            qs("#pOrigin").style.display = "none";
            qs("#pRate").style.display = "none";
        }
        qs("#stock").textContent = product.stock + "개";
        const tWrap = qs("#thumbs");
        tWrap.innerHTML = "";
        product.images.forEach((src, idx) => {
            const t = document.createElement("button");
            t.type = "button";
            t.className = "thumb" + (idx === 0 ? " active" : "");
            t.innerHTML = `<img src="${src}" alt="썸네일 ${idx + 1}">`;
            t.addEventListener("click", () => {
                qsa(".thumb").forEach(x => x.classList.remove("active"));
                t.classList.add("active");
                qs("#mainImg").src = src;
            });
            tWrap.appendChild(t);
        });
    }
    function bindRelated() {
        const g = qs("#relGrid");
        g.innerHTML = "";
        related.forEach(p => {
            const rate = discountRate(p.price, p.sale);
            const priceHtml = p.sale && p.sale < p.price
                ? `<div class="p-price"><div class="sale">${fmtKRW(p.sale)}</div><div class="origin">${fmtKRW(p.price)}</div></div>`
                : `<div class="p-price"><div class="sale">${fmtKRW(p.price)}</div></div>`;
            const card = document.createElement("a");
            card.href = "02_01_01.html";
            card.className = "product";
            card.innerHTML =
                `<div class="thumb-wrap"><img src="${p.img}" alt="${p.title}"><div class="badges">${p.soldout ? '<span class="badge soldout">품절</span>' : ""}${rate ? `<span class="badge sale">-${rate}%</span>` : ""}</div></div>` +
                `<div class="p-body"><div class="p-title">${p.title}</div><div class="p-cat">${p.cat}</div>${priceHtml}<div class="p-actions"><button class="btn small" type="button">자세히</button><button class="btn small primary" type="button"><i class="fa-solid fa-cart-shopping"></i></button></div></div>`;
            g.appendChild(card);
        });
    }
    function bindEvents() {
        qs("#minus").addEventListener("click", () => {
            const el = qs("#qty");
            const v = Math.max(1, (parseInt(el.value || "1", 10) - 1));
            el.value = v;
        });
        qs("#plus").addEventListener("click", () => {
            const el = qs("#qty");
            el.value = Math.max(1, (parseInt(el.value || "1", 10) + 1));
        });
        function payload() {
            return {
                id: product.id,
                title: product.title,
                qty: parseInt(qs("#qty").value || "1", 10),
                color: qs("#optColor").value,
                pack: qs("#optSize").value
            };
        }
        qs("#btnCart").addEventListener("click", () => alert("장바구니 담기: " + JSON.stringify(payload())));
        qs("#btnBuy").addEventListener("click", () => alert("바로구매: " + JSON.stringify(payload())));
        qs("#barCart").addEventListener("click", () => alert("장바구니 담기(모바일 바): " + JSON.stringify(payload())));
        qs("#barBuy").addEventListener("click", () => alert("구매(모바일 바): " + JSON.stringify(payload())));
        qsa(".tab-btn").forEach(btn => {
            btn.addEventListener("click", () => {
                qsa(".tab-btn").forEach(b => b.classList.remove("active"));
                btn.classList.add("active");
                const key = btn.dataset.tab;
                qsa(".tab-panel").forEach(p => p.classList.toggle("active", p.id === "tab-" + key));
            });
        });
    }
    bindDetail();
    bindRelated();
    bindEvents();
</script>
</body>
</html>
